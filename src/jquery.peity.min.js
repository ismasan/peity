// Peity jQuery plugin
// (c) 2010 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(d){d.fn.peity=function(a,e){return d(this).each(function(){d(this).change(function(){var b=d(this).html();d.fn.peity.graphers[a](d(this),d.extend({},d.fn.peity.defaults[a],e));d(this).trigger("chart:changed",b)}).trigger("change")})};d.fn.peity.graphers={};d.fn.peity.defaults={};d.fn.peity.add=function(a,e,b){d.fn.peity.graphers[a]=b;d.fn.peity.defaults[a]=e};d.fn.peity.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",radius:16},function(a,e){var b=e.radius/2,c=document.createElement("canvas");
c.setAttribute("width",e.radius);c.setAttribute("height",e.radius);a.wrapInner("<span />").append(c);a=d("span",a).hide().text().split(e.delimeter);var f=parseFloat(a[0]),g=parseFloat(a[1]);a=-Math.PI/2;f=f/g*Math.PI*2;c=c.getContext("2d");c.beginPath();c.moveTo(b,b);c.arc(b,b,b,0,Math.PI*2,false);c.closePath();c.fillStyle=e.colours[0];c.fill();c.beginPath();c.moveTo(b,b);c.arc(b,b,b,a,f+a,false);c.closePath();c.fillStyle=e.colours[1];c.fill()});d.fn.peity.add("bar",{colour:"#4D89F9",delimeter:",",
height:16,width:32},function(a,e){var b=document.createElement("canvas");b.setAttribute("width",e.width);b.setAttribute("height",e.height);a.wrapInner("<span />").append(b);a=d("span",a).hide().text().split(e.delimeter);var c=e.height/Math.max.apply(Math,a),f=e.width/a.length;b=b.getContext("2d");b.fillStyle=e.colour;for(var g=0;g<a.length;g++){var h=c*a[g];b.fillRect(g*f,e.height-h,f,h)}})})(jQuery);
